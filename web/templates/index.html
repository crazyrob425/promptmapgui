<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PromptMapGUI - LLM Security Testing</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <pre class="ascii-logo">
   _____                            _   __  __              
  |  __ \                          | | |  \/  |             
  | |__) | __ ___  _ __ ___  _ __ | |_| \  / | __ _ _ __   
  |  ___/ '__/ _ \| '_ ` _ \| '_ \| __| |\/| |/ _` | '_ \  
  | |   | | | (_) | | | | | | |_) | |_| |  | | (_| | |_) | 
  |_|   |_|  \___/|_| |_| |_| .__/ \__|_|  |_|\__,_| .__/  
                            | |                    | |     
                            |_|                    |_|     
                </pre>
                <h1>PromptMapGUI</h1>
                <p class="subtitle">Automated LLM Security Testing Tool</p>
            </div>
        </header>

        <main>
            <div class="scan-config">
                <h2>Scan Configuration</h2>
                
                <div class="form-section">
                    <h3>Target Model</h3>
                    <div class="form-group">
                        <label for="target-model">Model Name:</label>
                        <input type="text" id="target-model" placeholder="e.g., gpt-4, claude-3-opus-20240229, llama2:7b">
                    </div>
                    
                    <div class="form-group">
                        <label for="target-model-type">Model Type:</label>
                        <select id="target-model-type">
                            <option value="openai">OpenAI</option>
                            <option value="anthropic">Anthropic</option>
                            <option value="google">Google</option>
                            <option value="xai">XAI</option>
                            <option value="ollama">Ollama</option>
                            <option value="http">HTTP (Black-box)</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="http-config-group" style="display: none;">
                        <label for="http-config">HTTP Config File:</label>
                        <input type="text" id="http-config" placeholder="e.g., http-examples/http-config-example.yaml">
                    </div>
                </div>

                <div class="form-section">
                    <h3>Controller Model (Optional)</h3>
                    <div class="form-group">
                        <label for="controller-model">Model Name:</label>
                        <input type="text" id="controller-model" placeholder="Leave empty to use same as target">
                    </div>
                    
                    <div class="form-group">
                        <label for="controller-model-type">Model Type:</label>
                        <select id="controller-model-type">
                            <option value="">Same as Target</option>
                            <option value="openai">OpenAI</option>
                            <option value="anthropic">Anthropic</option>
                            <option value="google">Google</option>
                            <option value="xai">XAI</option>
                            <option value="ollama">Ollama</option>
                        </select>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Test Configuration</h3>
                    <div class="form-group">
                        <label for="iterations">Iterations per Test:</label>
                        <input type="number" id="iterations" value="3" min="1" max="100">
                    </div>
                    
                    <div class="form-group">
                        <label for="rule-type">Rule Categories:</label>
                        <select id="rule-type" multiple size="6">
                            <option value="">All Categories</option>
                        </select>
                        <small>Hold Ctrl/Cmd to select multiple</small>
                    </div>
                    
                    <div class="form-group checkbox-group">
                        <label>
                            <input type="checkbox" id="firewall-mode">
                            Firewall Testing Mode
                        </label>
                    </div>
                    
                    <div class="form-group" id="pass-condition-group" style="display: none;">
                        <label for="pass-condition">Pass Condition:</label>
                        <input type="text" id="pass-condition" placeholder="e.g., true">
                    </div>
                </div>

                <div class="form-actions">
                    <button id="start-scan" class="btn btn-primary">Start Scan</button>
                    <button id="stop-scan" class="btn btn-danger" style="display: none;">Stop Scan</button>
                </div>
            </div>

            <div class="scan-status">
                <h2>Scan Status</h2>
                <div id="status-display" class="status-idle">
                    <p>Ready to start scanning</p>
                </div>
                
                <div id="progress-container" style="display: none;">
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                    <p id="current-rule">Current Rule: <span>-</span></p>
                    <p id="progress-text">Progress: <span>0/0</span></p>
                </div>
            </div>

            <div class="scan-output">
                <h2>Scan Output</h2>
                <div id="output-log" class="log-container">
                    <p class="log-empty">Scan output will appear here...</p>
                </div>
            </div>

            <div class="scan-results" id="results-container" style="display: none;">
                <h2>Scan Results</h2>
                <div id="results-summary"></div>
                <div id="results-details"></div>
            </div>
        </main>

        <footer>
            <p>&copy; 2025 PromptMap Project | <a href="https://github.com/crazyrob425/promptmapgui" target="_blank">GitHub</a> | GPL-3.0 License</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
